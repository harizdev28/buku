!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="fbfb4edb-078e-4705-b354-b0cc5f305a30",e._sentryDebugIdIdentifier="sentry-dbid-fbfb4edb-078e-4705-b354-b0cc5f305a30")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[193],{90193:function(e,t,r){"use strict";r.d(t,{Z:function(){return L}});var a=r(52676),n=r(82723),s=r(96823),i=r.n(s),c=r(68774),d=r(55036),l=r(69662),o=r(57527),u=r(65237),m=r(30017),f=r(27418),p=r(19011),x=r(46417),v=r(2866),h=r(71082),y=r(29321),b=r(59248),_=r(81892),g=r(51497),w=r(76895),C=()=>{let e=(0,b.PN)(),{isWebView:t}=(0,f.Z)();return r=>{let{product:a,itemList:n}=r;if(!a)return;let s=(0,g.Z)({event:_.HG,product:a,itemList:n});(0,w.lM)(n);let i={item_list_id:n.id,item_list_name:n.name,items:[s]};t||(e({ecommerce:null}),e({event:_.HG,event_context:_.td,ecommerce:{view_lists:i}})),t&&(0,m.Z)({type:l.re,data:{event_name:_.HG,event_context:_.td,param:i}})}},j=r(25524),P=r(59877),Z=r(45659),N=r(99716),k=r.n(N),L=function(e){var t,r;let{to:s,withFavourite:b=!0,withAuthor:_=!0,imageWrapperClassName:g,cardContentClassName:w,isImagePriority:N=!1,className:L,listId:S,listName:W,product:Q,...A}=e,{t:I}=(0,n.$G)(),{isDesktop:z,isWebView:D}=(0,f.Z)(),B=(0,c.useQueryClient)(),{navigateToProtectedRoute:O}=(0,p.Z)(),E=C(),T=(0,j.Z)(),{title:F,slice_price:H,final_price:q,discount:G,author:M,product_meta_id:R,slug:J,is_oos:V}=Q,K=Q.image,X=D||!s?"span":i(),{data:Y,isLoading:$}=(0,Z.Z)(),{mutatePutWishlists:U,isLoadingPutWishlists:ee,mutateDeleteWishlist:et,isLoadingDeleteWishlists:er}=(0,P.Z)({onSuccessDeleteWishlists(){B.invalidateQueries({queryKey:[o.z_]})}}),ea=null==Y?void 0:null===(r=Y.data)||void 0===r?void 0:null===(t=r.includes)||void 0===t?void 0:t.call(r,R),en=async()=>{$||er||ee||await O({onAuthorized:()=>{T({method:ea?"remove":"add",product:Q,itemList:{id:null!=S?S:"",name:null!=W?W:""}}),z||(0,m.Z)({type:l.sR,data:{event:ea?l.LQ:l.B$,productMetaId:R}}),ea?et({product_meta_id:R}):U({product_meta_ids:[R]})}})};return(0,a.jsxs)(h.Zb,{className:(0,u.cn)(k().productCard,"relative flex flex-grow-0 flex-col justify-between overflow-hidden",L),disabled:!1,"data-testid":"productCard",...A,"data-sentry-element":"Card","data-sentry-component":"ProductCard","data-sentry-source-file":"ProductCard.tsx",children:[b&&!$&&(0,a.jsx)(x.Z,{isOn:null!=ea&&ea,className:(0,u.cn)(k().favouriteSwitch,"pointer-events-auto absolute right-0 top-0 h-9 w-9"),"data-testid":"productCardFavourite",onClick:en}),(0,a.jsx)(X,{...D?{href:""}:{href:s},onClick:e=>{e.stopPropagation(),z||(0,m.Z)({type:l.Ap,data:{screen_route:l.Lf,param:{slug:J,itemListId:null!=S?S:"",itemListName:null!=W?W:""}}}),E({product:Q,itemList:{id:null!=S?S:"",name:null!=W?W:""}})},prefetch:!1,"data-sentry-element":"LinkComponenent","data-sentry-source-file":"ProductCard.tsx",children:(0,a.jsxs)(h.aY,{className:(0,u.cn)(k().cardContent,"flex flex-col gap-y-2 p-4",w),"data-testid":"productCardContent","data-sentry-element":"CardContent","data-sentry-source-file":"ProductCard.tsx",children:[(0,a.jsxs)("div",{className:(0,u.cn)(k().imageWrapper,"relative mx-auto",g),children:[V&&(0,a.jsx)("div",{className:(0,u.cn)(k().oosLabelBg,"absolute -inset-x-4 top-0 flex h-full items-center justify-center"),children:(0,a.jsx)(v._,{variant:"red",className:"opacity-1","data-testid":"productCardOosLabel",children:I("outOfStock")})}),(0,a.jsx)(y.Z,{src:""===K?d.Bz:K,fallbackSrc:d.Bz,fill:!0,sizes:z?"128px":"104px",alt:F,className:"object-contain","data-testid":"productCardImage",quality:d.AK,priority:N,transformationOptions:{width:256},"data-sentry-element":"Image","data-sentry-source-file":"ProductCard.tsx"},K)]}),(0,a.jsxs)("div",{className:"relative flex-grow",children:[V&&(0,a.jsx)("div",{className:(0,u.cn)(k().oosLabelBg,"absolute flex h-full w-full items-center justify-center")}),_&&(0,a.jsx)("div",{className:(0,u.cn)("truncate text-2xs-medium",V?"text-neutral-200":"text-neutral-500"),"data-testid":"productCardAuthor",children:null!=M?M:""}),(0,a.jsx)("h2",{className:(0,u.cn)("line-clamp-2 text-xs-medium","text-neutral-700"),"data-testid":"productCardTitle",children:F})]}),(0,a.jsxs)("div",{className:"relative flex flex-col",children:[V&&(0,a.jsx)("div",{className:(0,u.cn)(k().oosLabelBg,"absolute flex h-full w-full items-center justify-center")}),(0,a.jsx)("div",{className:(0,u.cn)("text-s-extrabold","text-neutral-700"),"data-testid":"productCardFinalPrice",children:(0,u.T4)(null!=q?q:0)}),(0,a.jsx)("div",{className:(0,u.cn)(k().priceWrapper,"flex items-center gap-x-1"),children:!!G&&!!H&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,u.cn)(k().discount,"inline-block rounded-2xs bg-red-50 px-1 text-2xs-medium text-red-500"),"data-testid":"productCardDiscount",children:[G,"%"]}),(0,a.jsx)("div",{className:"text-2xs-medium font-normal text-neutral-200 line-through","data-testid":"productCardSlicePrice",children:(0,u.T4)(null!=H?H:0)})]})})]})]})})]})}},59877:function(e,t,r){"use strict";r.d(t,{Z:function(){return b}});var a=r(52676),n=r(82723),s=r(64913),i=r(68774),c=r(69662),d=r(30017),l=r(27418),o=r(42965),u=r(54318),m=r(97143),f=r(57527),p=r(99031),x=r(25121),v=r(64509),h=e=>{let{onSuccess:t,onError:r}=e;return(0,i.useMutation)("".concat(f.xQ,"-").concat(m.pv),async e=>{try{let t="".concat(m.pv,"/").concat(e.product_meta_id),r=await (0,v.Z)(t,{method:"DELETE"});if(!r.ok)return Promise.reject(r);let a=await r.json();if(a.code!==p.iH)return Promise.reject(a);return Promise.resolve(a)}catch(e){return Promise.reject(e)}},{onSuccess:t,onError:e=>{(0,x.Z)(e),null==r||r(e)}})},y=e=>{let{onSuccess:t,onError:r}=e;return(0,i.useMutation)("".concat(f.xQ,"-").concat(m.pv),async e=>{try{let t=await (0,v.Z)(m.pv,{method:"PUT",body:JSON.stringify(e)});if(!t.ok)return Promise.reject(t);let r=await t.json();if(r.code!==p.iH)return Promise.reject(r);return Promise.resolve(r)}catch(e){return Promise.reject(e)}},{onSuccess:t,onError:e=>{(0,x.Z)(e),null==r||r(e)}})},b=function(){let{deleteQuantity:e=0,isCart:t=!1,onSuccessPutWishlists:r,onSuccessDeleteWishlists:m}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{t:f}=(0,n.$G)(),p=(0,i.useQueryClient)(),x=(0,s.useRouter)(),{isDesktop:v,isWebView:b}=(0,l.Z)(),_=()=>{b||null==x||x.push("/my-account/wishlist"),v||(0,d.Z)({type:c.Ap,data:{screen_route:c.ye}})},{mutate:g,isLoading:w}=y({onSuccess:()=>{p.invalidateQueries("wishlistsIds"),(0,u.OV)({message:t?f("wishlistMoved",{quantity:e}):f("wishlistAdded"),action:(0,a.jsx)(o.AC,{altText:"Ok",onClick:_,children:f("checkWishlist")}),"data-testid":"wishlistAddedSuccess"}),null==r||r()}}),{mutate:C,isLoading:j}=h({onSuccess:()=>{p.invalidateQueries("wishlistsIds"),(0,u.OV)({message:f("wishlistRemoved"),action:(0,a.jsx)(o.AC,{altText:"Ok",onClick:_,children:f("checkWishlist")}),"data-testid":"wishlistRemovedSuccess"}),null==m||m()}});return{mutatePutWishlists:g,isLoadingPutWishlists:w,mutateDeleteWishlist:C,isLoadingDeleteWishlists:j}}},45659:function(e,t,r){"use strict";var a=r(83905),n=r(68774),s=r(97143),i=r(57527),c=r(99031),d=r(64509),l=r(87295);t.Z=function(){let{onError:e,onSuccess:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.useQuery)({queryKey:[i.JR],queryFn:async()=>{try{let e=await (0,d.Z)(s.Q6),t=await e.json();if(t.code!==c.iH)return Promise.reject(t);return Promise.resolve(t)}catch(e){return Promise.reject(e)}},onSuccess:t,onError:e,enabled:!l.Z&&(!!(0,a.getCookie)("access_token")||!!(0,a.getCookie)("refresh_token")),cacheTime:0})}},46417:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(52676),n=r(37058),s=r.n(n);r(75271);var i=r(65237),c={src:"https://static.gramedia.net/_next/static/media/favourite-off.7eeb792d.svg"},d={src:"https://static.gramedia.net/_next/static/media/favourite-on.dcb7ded0.svg"},l=e=>{let{isOn:t,className:r,...n}=e,l=t?d.src:c.src;return(0,a.jsx)("button",{className:(0,i.cn)("group/item flex items-center justify-center",r),...n,"data-sentry-component":"Switch","data-sentry-source-file":"FavouriteSwitch.tsx",children:(0,a.jsx)(s(),{src:l,width:20,height:20,alt:"Favourite switch",className:"absolute transition-all group-active/item:scale-75",unoptimized:!0,"data-sentry-element":"Image","data-sentry-source-file":"FavouriteSwitch.tsx"})})}},2866:function(e,t,r){"use strict";r.d(t,{_:function(){return l}});var a=r(52676),n=r(86946),s=r(2808);r(75271);var i=r(65237);let c=(0,s.j)("text-s-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70",{variants:{variant:{neutral:"text-neutral-500 bg-neutral-50",brand:"text-brand-500 bg-brand-50",accent:"text-accent-500 bg-accent-50",green:"text-green-500 bg-green-50",yellow:"text-yellow-500 bg-yellow-50",red:"text-red-500 bg-red-50"},size:{default:"text-s-medium rounded-xs py-1 px-2",small:"text-2xs-medium py-[3px] rounded-2xs py-[2px] px-1"}},defaultVariants:{variant:"neutral",size:"default"}}),d=e=>{let{className:t,variant:r,size:n,...s}=e;return(0,a.jsx)("span",{className:(0,i.cn)(c({variant:r,size:n}),t),...s,"data-sentry-component":"Label","data-sentry-source-file":"Label.tsx"})};d.displayName=n.f.displayName;var l=d},42965:function(e,t,r){"use strict";r.d(t,{AC:function(){return a.AC}});var a=r(23043)},25524:function(e,t,r){"use strict";var a=r(59248),n=r(69662),s=r(30017),i=r(27418),c=r(81892),d=r(51497);t.Z=()=>{let e=(0,a.PN)(),{isWebView:t}=(0,i.Z)();return r=>{let{product:a,method:i,itemList:l}=r,o="add"===i?c.yJ:c.Yq,u=(0,d.Z)({event:o,product:a,itemList:l});t||(e({ecommerce:null}),e({event:o,ecommerce:{product_view:{items:[u]}}})),t&&(0,s.Z)({type:n.re,data:{event_name:o,param:{items:[u]}}})}}},25121:function(e,t,r){"use strict";var a=r(83905);t.Z=e=>{if((null==e?void 0:e.code)==="unauthorized"){(0,a.setCookie)("flash_snackbar","unauthorized"),window.location.href="/";return}}},99716:function(e){e.exports={productCard:"ProductCard_productCard__fGBQ_",favouriteSwitch:"ProductCard_favouriteSwitch__nbjck",cardContent:"ProductCard_cardContent__fawWr",imageWrapper:"ProductCard_imageWrapper__WWY2H",oosLabelBg:"ProductCard_oosLabelBg__Xb3JX",priceWrapper:"ProductCard_priceWrapper__3fcaX",discount:"ProductCard_discount__Q8rno"}},86946:function(e,t,r){"use strict";r.d(t,{f:function(){return c}});var a=r(75271),n=r(98167),s=r(52676),i=a.forwardRef((e,t)=>(0,s.jsx)(n.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var c=i}}]);